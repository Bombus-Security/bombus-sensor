/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

buildscript {
	repositories {
		mavenCentral()
	}

	dependencies {
		classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.12'
	}
}
/*
 * Sets up the docker build container, copies all needed files into it, execs the 
 * build script on the container, and retrieves the built package.
 */
task makeAlpinePackage(type: Exec) {
	workingDir './alpine'
	commandLine 'sh', './gradle-build-package.sh'

}

task makeDockerImages() {
}

task copyNIDSConfigToDockerTemp(type: Copy) {
	from "nids/local.zeek", "nids/zeek-filebeat.yml", "nids/node.cfg"
	into "docker/temp"
}

task copyHIDSConfigToDockerTemp(type: Copy) {
        from "hids/wazuh-filebeat.yml", "hids/wazuh-template.json"
        into "docker/temp"
}

task copyDBConfigToDockerTemp(type: Copy) {
        from "database/logstash.yml", "database/logstash-pipeline.conf"
        into "docker/temp"
}

task copyAllConfigToELKTemp() {
	dependsOn 'copyDBConfigToDockerTemp', 'copyHIDSConfigToDockerTemp', 'copyNIDSConfigToDockerTemp'
}
